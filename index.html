<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ðŸ“œ Omni Archivo del Multiverso</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* =========================
   VARIABLES GLOBALES
========================= */
:root{
 --bg:#05050a;
 --panel:#0d0d18;
 --panel2:#121226;
 --text:#e6e6f0;
 --glow:#7cc9ff;
 --gold:#d4af37;
 --danger:#ff3b3b;
}

/* =========================
   RESET
========================= */
*{
 margin:0;
 padding:0;
 box-sizing:border-box;
}

/* =========================
   BODY
========================= */
body{
 background:radial-gradient(circle at top,#0a0a18,#000);
 color:var(--text);
 font-family:system-ui,Segoe UI,Roboto,Arial;
 min-height:100vh;
 overflow-x:hidden;
}

/* =========================
   HEADER
========================= */
header{
 position:sticky;
 top:0;
 z-index:10;
 background:rgba(0,0,0,.75);
 backdrop-filter:blur(10px);
 border-bottom:1px solid #1b1b2a;
}
header h1{
 text-align:center;
 padding:14px;
 letter-spacing:2px;
 font-weight:600;
}

/* =========================
   HERO VIDEO
========================= */
#hero{
 position:relative;
 height:42vh;
 background:#000;
 overflow:hidden;
}
#hero video{
 width:100%;
 height:100%;
 object-fit:cover;
}
#hero::after{
 content:"";
 position:absolute;
 inset:0;
 background:linear-gradient(to bottom,transparent 60%,#000);
}

/* =========================
   CONTROLS
========================= */
#controls{
 display:flex;
 flex-wrap:wrap;
 gap:10px;
 justify-content:center;
 padding:14px;
 background:var(--panel);
 border-bottom:1px solid #1b1b2a;
}
button,input{
 background:var(--panel2);
 border:1px solid #24244a;
 color:var(--text);
 padding:10px 14px;
 border-radius:8px;
 font-size:14px;
}
button:hover{
 border-color:var(--glow);
 box-shadow:0 0 8px #7cc9ff33;
 cursor:pointer;
}
input{
 min-width:180px;
}

/* =========================
   CRONISTA
========================= */
#cronista{
 margin:14px;
 padding:16px;
 background:#0b0b18;
 border-left:4px solid var(--glow);
 font-style:italic;
 line-height:1.4;
 box-shadow:0 0 18px #000;
}

/* =========================
   SECTIONS
========================= */
section{
 margin:14px;
 padding:16px;
 background:var(--panel);
 border-radius:12px;
 box-shadow:0 0 25px #000;
}
section h2{
 margin-bottom:12px;
 letter-spacing:1px;
}

/* =========================
   RELIQUIAS
========================= */
#relics{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
 gap:12px;
}
.relic{
 background:#0b0b16;
 border:1px solid #222;
 border-radius:10px;
 padding:12px;
 opacity:.35;
 transition:.3s;
}
.relic.unlocked{
 opacity:1;
 border-color:var(--gold);
 box-shadow:0 0 14px #d4af3740;
}
.relic h4{
 margin-bottom:6px;
 color:var(--gold);
}
.relic p{
 font-size:13px;
 opacity:.85;
}

/* =========================
   CORRUPCIÃ“N VISUAL
========================= */
.corrupt{
 animation:glitch .15s infinite;
}
@keyframes glitch{
 0%{transform:translate(0)}
 25%{transform:translate(1px,-1px)}
 50%{transform:translate(-1px,1px)}
 75%{transform:translate(2px,0)}
}

/* =========================
   FOOTER
========================= */
footer{
 text-align:center;
 padding:20px;
 opacity:.45;
 font-size:13px;
}
</style>
</head>

<body>

<header>
<h1>ðŸ“œ OMNI ARCHIVO DEL MULTIVERSO</h1>
</header>

<!-- =========================
     HERO VIDEO
========================= -->
<div id="hero">
<video id="heroVideo" autoplay muted loop playsinline>
 <source src="" type="video/mp4">
</video>
</div>

<!-- =========================
     CONTROLES
========================= -->
<div id="controls">
<button onclick="changeUniverse('DB')">DB</button>
<button onclick="changeUniverse('DBZ')">DBZ</button>
<button onclick="changeUniverse('DBS')">DBS</button>
<button onclick="changeUniverse('GT')">GT</button>
<button onclick="changeUniverse('ALL')">ALL</button>
<input placeholder="Buscar registroâ€¦" oninput="handleSearch(this.value)">
<button onclick="exportFile()">Exportar Archivo</button>
</div>

<!-- =========================
     CRONISTA
========================= -->
<div id="cronista">
El archivo yace en silencio. NingÃºn universo ha sido perturbado.
</div>

<!-- =========================
     RELIQUIAS
========================= -->
<section>
<h2>Reliquias del Archivo</h2>
<div id="relics"></div>
</section>

<footer>
Archivo sellado fuera del tiempo Â· Omni Archive
</footer>

<script>
/* ======================================================
   ESTADO GLOBAL PERSISTENTE
====================================================== */
const STATE = JSON.parse(localStorage.getItem("STATE")) || {
 current:"ALL",
 history:[],
 corruption:0
};

/* ======================================================
   VIDEOS MP4 REALES
====================================================== */
const VIDEOS={
 DB:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",
 DBZ:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4",
 DBS:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",
 GT:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerMeltdowns.mp4",
 ALL:"https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
};

/* ======================================================
   RELIQUIAS / LOGROS
====================================================== */
const RELICS={
 explorador:{
  name:"Ojo del Cronista",
  desc:"Has explorado los registros del archivo."
 },
 viajero:{
  name:"Ancla Temporal",
  desc:"Has viajado entre universos."
 },
 corruptor:{
  name:"Fragmento Prohibido",
  desc:"Has cruzado lÃ­neas temporales."
 },
 archivista:{
  name:"Sello del Archivo",
  desc:"Has exportado el archivo completo."
 }
};

let unlocked = JSON.parse(localStorage.getItem("RELICS")) || {};

/* ======================================================
   INICIALIZACIÃ“N
====================================================== */
renderRelics();
setHeroVideo(VIDEOS[STATE.current]);

/* ======================================================
   VIDEO SEGURO
====================================================== */
function setHeroVideo(src){
 const v=document.getElementById("heroVideo");
 v.pause();
 v.innerHTML=`<source src="${src}" type="video/mp4">`;
 v.load();
 v.play().catch(()=>{});
}

/* ======================================================
   REGLA REAL DE CORRUPCIÃ“N
====================================================== */
function shouldCorrupt(next){
 return STATE.history.length>0 &&
        next!==STATE.current &&
        STATE.current!=="ALL" &&
        next!=="ALL";
}

/* ======================================================
   CAMBIO DE UNIVERSO
====================================================== */
function changeUniverse(next){
 if(shouldCorrupt(next)){
  STATE.corruption++;
  unlock("corruptor");
  document.body.classList.add("corrupt");
  setTimeout(()=>document.body.classList.remove("corrupt"),600);
  speak("Las realidades se superponen. El archivo se resiente.");
 }

 if(!STATE.history.includes(next) && next!=="ALL"){
  STATE.history.push(next);
 }

 STATE.current=next;
 saveState();
 setHeroVideo(VIDEOS[next]);
 unlock("viajero");
 speak("El cronista observa el universo "+next+".");
}

/* ======================================================
   BUSCADOR
====================================================== */
function handleSearch(v){
 if(v.length>=3){
  unlock("explorador");
 }
}

/* ======================================================
   LOGROS
====================================================== */
function unlock(k){
 if(unlocked[k]) return;
 unlocked[k]=true;
 localStorage.setItem("RELICS",JSON.stringify(unlocked));
 renderRelics();
 speak("Reliquia recuperada: "+RELICS[k].name);
}

/* ======================================================
   RENDER RELIQUIAS
====================================================== */
function renderRelics(){
 const c=document.getElementById("relics");
 c.innerHTML="";
 for(const k in RELICS){
  const r=document.createElement("div");
  r.className="relic"+(unlocked[k]?" unlocked":"");
  r.innerHTML=
   "<h4>"+RELICS[k].name+"</h4>"+
   "<p>"+RELICS[k].desc+"</p>";
  c.appendChild(r);
 }
}

/* ======================================================
   CRONISTA
====================================================== */
function speak(t){
 document.getElementById("cronista").textContent=t;
}

/* ======================================================
   EXPORTAR ARCHIVO
====================================================== */
function exportFile(){
 unlock("archivista");
 const blob=new Blob(
  [document.documentElement.outerHTML],
  {type:"text/html"}
 );
 const a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="OMNI_ARCHIVO_EXPORTADO.html";
 a.click();
 speak("El archivo ha sido sellado y duplicado.");
}

/* ======================================================
   GUARDAR ESTADO
====================================================== */
function saveState(){
 localStorage.setItem("STATE",JSON.stringify(STATE));
}
</script>

<!-- =========================
     RELIQUIAS / LOGROS
========================= -->
<section>
  <h2>Reliquias del Archivo</h2>
  <div id="relics"></div>
</section>

<!-- =========================
     CONTROLES DE EXPORTACIÃ“N
========================= -->
<div id="controls">
  <button onclick="changeUniverse('DB')">DB</button>
  <button onclick="changeUniverse('DBZ')">DBZ</button>
  <button onclick="changeUniverse('DBS')">DBS</button>
  <button onclick="changeUniverse('GT')">GT</button>
  <button onclick="changeUniverse('ALL')">ALL</button>
  <input placeholder="Buscar registro..." oninput="handleSearch(this.value)">
  <button onclick="exportFile()">Exportar Archivo</button>
</div>

<!-- =========================
     CRONISTA (Narrativa Reactiva)
========================= -->
<div id="cronista">
  El archivo yace en silencio. NingÃºn universo ha sido perturbado.
</div>

<!-- =========================
     FOOTER (Sello del Archivo)
========================= -->
<footer>
  Archivo sellado fuera del tiempo Â· Omni Archive
</footer>

<script>
/* ======================================================
   ESTADO GLOBAL PERSISTENTE
====================================================== */
const STATE = JSON.parse(localStorage.getItem("STATE")) || {
  current: "ALL",
  history: [],
  corruption: 0
};

/* ======================================================
   VIDEOS MP4 REALES
====================================================== */
const VIDEOS = {
  DB: "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",
  DBZ: "https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4",
  DBS: "https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",
  GT: "https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerMeltdowns.mp4",
  ALL: "https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
};

/* ======================================================
   RELIQUIAS / LOGROS
====================================================== */
const RELICS = {
  explorador: {
    name: "Ojo del Cronista",
    desc: "Has explorado los registros del archivo."
  },
  viajero: {
    name: "Ancla Temporal",
    desc: "Has viajado entre universos."
  },
  corruptor: {
    name: "Fragmento Prohibido",
    desc: "Has cruzado lÃ­neas temporales."
  },
  archivista: {
    name: "Sello del Archivo",
    desc: "Has exportado el archivo completo."
  }
};

let unlocked = JSON.parse(localStorage.getItem("RELICS")) || {};

/* ======================================================
   INICIALIZACIÃ“N
====================================================== */
renderRelics();
setHeroVideo(VIDEOS[STATE.current]);

/* ======================================================
   VIDEO SEGURO
====================================================== */
function setHeroVideo(src) {
  const v = document.getElementById("heroVideo");
  v.pause();
  v.innerHTML = `<source src="${src}" type="video/mp4">`;
  v.load();
  v.play().catch(() => {});
}

/* ======================================================
   REGLA REAL DE CORRUPCIÃ“N
====================================================== */
function shouldCorrupt(next) {
  return STATE.history.length > 0 &&
    next !== STATE.current &&
    STATE.current !== "ALL" &&
    next !== "ALL";
}

/* ======================================================
   CAMBIO DE UNIVERSO
====================================================== */
function changeUniverse(next) {
  if (shouldCorrupt(next)) {
    STATE.corruption++;
    unlock("corruptor");
    document.body.classList.add("corrupt");
    setTimeout(() => document.body.classList.remove("corrupt"), 600);
    speak("Las realidades se superponen. El archivo se resiente.");
  }

  if (!STATE.history.includes(next) && next !== "ALL") {
    STATE.history.push(next);
  }

  STATE.current = next;
  saveState();
  setHeroVideo(VIDEOS[next]);
  unlock("viajero");
  speak("El cronista observa el universo " + next + ".");
}

/* ======================================================
   BUSCADOR
====================================================== */
function handleSearch(v) {
  if (v.length >= 3) {
    unlock("explorador");
  }
}

/* ======================================================
   LOGROS
====================================================== */
function unlock(k) {
  if (unlocked[k]) return;
  unlocked[k] = true;
  localStorage.setItem("RELICS", JSON.stringify(unlocked));
  renderRelics();
  speak("Reliquia recuperada: " + RELICS[k].name);
}

/* ======================================================
   RENDER RELIQUIAS
====================================================== */
function renderRelics() {
  const c = document.getElementById("relics");
  c.innerHTML = "";
  for (const k in RELICS) {
    const r = document.createElement("div");
    r.className = "relic" + (unlocked[k] ? " unlocked" : "");
    r.innerHTML =
      "<h4>" + RELICS[k].name + "</h4>" +
      "<p>" + RELICS[k].desc + "</p>";
    c.appendChild(r);
  }
}

/* ======================================================
   CRONISTA
====================================================== */
function speak(t) {
  document.getElementById("cronista").textContent = t;
}

/* ======================================================
   EXPORTAR ARCHIVO
====================================================== */
function exportFile() {
  unlock("archivista");
  const blob = new Blob(
    [document.documentElement.outerHTML],
    { type: "text/html" }
  );
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "OMNI_ARCHIVO_EXPORTADO.html";
  a.click();
  speak("El archivo ha sido sellado y duplicado.");
}

/* ======================================================
   GUARDAR ESTADO
====================================================== */
function saveState() {
  localStorage.setItem("STATE", JSON.stringify(STATE));
}
</script>

</body>
</html>
